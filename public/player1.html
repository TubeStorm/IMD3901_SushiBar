<!DOCTYPE html>
<html>
	<head>
		<title>Sushi バー</title>
	<script src="/js/aframe.min.js"></script> <!-- https://github.com/aframevr/aframe -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script src="/js/spherical-env-map.js"></script> <!-- https://github.com/aframevr/aframe -->
	<script src="/js/load-props.js"></script>
	<script src="/js/timer.js"></script>
    <script src="/js/raycaster-listen.js"></script>
  </head>
        <body>
            <h1>Welcome to the Sushi バー(Bar) Environment Test Scene</h1>
            <!--<a-scene outline>-->

            <a-scene time shadow="type:basic;" >
                    <a-assets timeout="4000">
													<!--LOADING KITCHEN-->
	                        <a-asset-item id="kitchenEnviro-obj" src="/assets/models/kitchenEnviro/kitchen.obj"></a-asset-item>
	                        <img id="kitchenEnviroFloor-mtl" src="/assets/models/kitchenEnviro/texture.png"></img>


	                        <!--LOADING DECORATIONS-->
	                        <a-asset-item id="canD-obj" src="/assets/models/kitchenEnviro/decorations/can/can.obj"></a-asset-item>
	                        <img id="canD-mtl" src="/assets/models/kitchenEnviro/decorations/can/can.png"></img>

	                        <a-asset-item id="cucumberD-obj" src="/assets/models/kitchenEnviro/decorations/cucumber/cucumber.obj"></a-asset-item>
	                        <img id="cucumberD-mtl" src="/assets/models/kitchenEnviro/decorations/cucumber/cucumber.png"></img>

	                        <a-asset-item id="cucumberSliceD-obj" src="/assets/models/kitchenEnviro/decorations/cucumber/cucumber_sliced.obj"></a-asset-item>
	                        <img id="cucumberSliceD-mtl" src="/assets/models/kitchenEnviro/decorations/cucumber/cucumber_sliced.png"></img>

	                        <a-asset-item id="cupD-obj" src="/assets/models/kitchenEnviro/decorations/cup/cup.obj"></a-asset-item>
	                        <img id="cupD-mtl" src="/assets/models/kitchenEnviro/decorations/cup/cup.png"></img>

	                        <a-asset-item id="knifeD-obj" src="/assets/models/kitchenEnviro/decorations/knife/knife.obj"></a-asset-item>
	                        <img id="knifeD-mtl" src="/assets/models/kitchenEnviro/decorations/knife/knife.png"></img>

	                        <a-asset-item id="matD-obj" src="/assets/models/kitchenEnviro/decorations/mat/mat.obj"></a-asset-item>
	                        <img id="matD-mtl" src="/assets/models/kitchenEnviro/decorations/mat/mat.png"></img>

	                        <a-asset-item id="riceD-obj" src="/assets/models/kitchenEnviro/decorations/rice/rice.obj"></a-asset-item>
	                        <img id="riceD-mtl" src="/assets/models/kitchenEnviro/decorations/rice/rice.png"></img>

	                        <a-asset-item id="seaweed1D-obj" src="/assets/models/kitchenEnviro/decorations/seaweed/seaweed1.obj"></a-asset-item>
	                        <img id="seaweed1D-mtl" src="/assets/models/kitchenEnviro/decorations/seaweed/seaweed1.png"></img>

	                        <a-asset-item id="seaweed2D-obj" src="/assets/models/kitchenEnviro/decorations/seaweed/seaweed2.obj"></a-asset-item>
	                        <img id="seaweed2D-mtl" src="/assets/models/kitchenEnviro/decorations/seaweed/seaweed2.png"></img>

	                        <!--<a-asset-item id="saltD-obj" src="/assets/models/kitchenEnviro/decorations/salt/salt.obj"></a-asset-item>-->
	                        <!--<a-asset-item id="saltD-mtl" src="/assets/models/kitchenEnviro/decorations/salt/salt.mtl"></a-asset-item>-->


	                        <!--LOADING PROPS-->
	                        <a-asset-item id="avocado-obj" src="/assets/models/kitchenEnviro/props/avocado/avocado.obj"></a-asset-item>
	                        <img id="avocado-mtl" src="/assets/models/kitchenEnviro/props/avocado/avocado.png"></img>

	                        <a-asset-item id="cucumber-obj" src="/assets/models/kitchenEnviro/props/cucumber/cucumber.obj"></a-asset-item>
	                        <img id="cucumber-mtl" src="/assets/models/kitchenEnviro/props/cucumber/cucumber.png"></img>

	                        <a-asset-item id="knife-obj" src="/assets/models/kitchenEnviro/props/knife/knife.obj"></a-asset-item>
	                        <img id="knife-mtl" src="/assets/models/kitchenEnviro/props/knife/knife.png"></img>

	                        <a-asset-item id="cup-obj" src="/assets/models/kitchenEnviro/props/cup/cup.obj"></a-asset-item>
	                        <img id="cup-mtl" src="/assets/models/kitchenEnviro/props/cup/cup.png"></img>

	                        <a-asset-item id="rice-obj" src="/assets/models/kitchenEnviro/props/rice/rice.obj"></a-asset-item>
	                        <img id="rice-mtl" src="/assets/models/kitchenEnviro/props/rice/rice.png"></img>

	                        <a-asset-item id="salmon-obj" src="/assets/models/kitchenEnviro/props/salmon/salmon.obj"></a-asset-item>
	                        <img id="salmon-mtl" src="/assets/models/kitchenEnviro/props/salmon/salmon.png"></img>

	                        <!--<a-asset-item id="salt-obj" src="/assets/models/kitchenEnviro/props/salt/salt.obj"></a-asset-item>-->
	                        <!--<a-asset-item id="salt-mtl" src="/assets/models/kitchenEnviro/props/salt/salt.mtl"></a-asset-item>-->

	                        <a-asset-item id="seaweed-obj" src="/assets/models/kitchenEnviro/props/seaweed/seaweed.obj"></a-asset-item>
	                        <img id="seaweed-mtl" src="/assets/models/kitchenEnviro/props/seaweed/seaweed.png"></img>

	                        <a-asset-item id="servebar-obj" src="/assets/models/kitchenEnviro/props/servebar/servebar.obj"></a-asset-item>
	                        <img id="servebar-mtl" src="/assets/models/kitchenEnviro/texture.png"></img>

													<!--LOADING NPC-->
													<a-asset-item id="male2-obj" src="/assets/models/npc/Male2/Npc2.obj"></a-asset-item>
													<a-asset-item id="male2-mtl" src="/assets/models/npc/Male2/Npc2.mtl"></a-asset-item>
		</a-assets>
                <!--CAMERA CONTROLS-->
                <a-entity id="mainCamera" position="0 40 -1"  camera look-controls wasd-controls="acceleration: 2000">
								<a-entity cursor="fuse:false; fuseTimeout:1000; rayOrigin:mouse"
												position="0 0 -1">
								</a-entity>
								<a-text id="timerTXT"
										value="TIME LEFT: "
										position="-0.45 0.75 -1"
										color="black"
										width="3"
										anchor="left">

										<a-text id="timerNUMBERS" position="1.75 0.75 -1" width="6" color="black" text=" "></a-text>

									</a-text>
                </a-entity>

<!--LIGHTING-->
                <a-entity light="type:directional; castShadow:false; intensity:0.6; shadowBias:-0.000001; shadowMapWidth:1024; shadowMapHeight:1024;" position="-0.5 1 1"></a-entity>
                <a-entity light="type: ambient; intensity: 0.9; color:#bbb;"></a-entity>
                
                <!--KITCHEN-->
                <a-obj-model load-props timer src="#kitchenEnviro-obj" material="src:#kitchenEnviroFloor-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <!--DECORATIONS (can't be interacted with)-->
                <a-obj-model src="#canD-obj" material="src:#canD-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model src="#cucumberD-obj" material="src:#cucumberD-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model src="#cucumberSliceD-obj" material="src:#cucumberSliceD-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model src="#cupD-obj" material="src:#cupD-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model src="#knifeD-obj" material="src:#knifeD-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model src="#matD-obj" material="src:#matD-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model src="#riceD-obj" material="src:#riceD-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model src="#seaweed1D-obj" material="src:#seaweed1D-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model src="#seaweed2D-obj" material="src:#seaweed2D-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <!--<a-obj-model src="#saltD-obj" mtl="#saltD-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>-->

                <!--PROPS-->             
                <a-obj-model id="avocado" src="#avocado-obj" material="src:#avocado-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model id="cucumber" src="#cucumber-obj" material="src:#cucumber-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model id="knife" src="#knife-obj" material="src:#knife-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model id="cup" src="#cup-obj" material="src:#cup-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model id="rice" src="#rice-obj" material="src:#rice-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model id="salmon" src="#salmon-obj" material="src:#salmon-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <!--<a-obj-model id="salt" src="#salt-obj" mtl="#salt-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>-->
                <a-obj-model id="seaweed" src="#seaweed-obj" material="src:#seaweed-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>
                <a-obj-model id="servebar" src="#servebar-obj" material="src:#servebar-mtl" position="0 0 0" rotation="0 0 0" scale="0.5 0.5 0.5" shadow="cast:false; receive:false;" spherical-env-map="src:#skymap;"></a-obj-model>


                <a-entity id="sky"
                    geometry="primitive:sphere; radius:500;"
                    material="shader:flat; src:#skymap;  aside:back; height:2048; width:2048">
                </a-entity>
                
            </a-scene>


            <script src="/socket.io/socket.io.js"></script>
            <script>
                let socket = io();

                //default connect event
                 socket.on('connect', function() {
					console.log("connected!");
					
				 });
				 

				  document.querySelector('#avocado').addEventListener('click', function() {
					  console.log("passing through server");
					socket.emit('moveClickP2');
					
				});

			socket.on('moveP1', function(data) {
                //create rgb color string for css
                let coordinates = 'xyz(' + data.x + ',' + data.y + ',' + data.z + ')'; 
                console.log("coordinates recieved: " + coordinates);


			});

            </script>
		</body>
	</head>
</html>
